# 小程序环境切换说明

## 📋 环境配置

小程序支持开发环境和生产环境自动切换，无需复杂配置。

## ⚙️ 环境设置

### `miniprogram/pages/upload/upload.js` 中的配置

```javascript
// 环境配置（修改这里切换环境）
const IS_DEVELOPMENT = true; // 开发时设为true，生产时设为false
```

## 🚀 环境详情

### 开发环境 (`IS_DEVELOPMENT = true`)
```javascript
✅ API地址: http://localhost:5000
✅ Token: 使用内置测试Token
✅ 日志: 显示环境信息
✅ 适合: 本地开发和测试
```

### 生产环境 (`IS_DEVELOPMENT = false`)
```javascript
✅ API地址: https://www.wubug.cc
✅ Token: 使用用户登录Token
✅ 日志: 不显示调试信息
✅ 适合: 正式发布使用
```

## 🔄 切换步骤

### 开发测试
1. 确保本地服务器运行: `cd server && npm start`
2. 修改配置: `const IS_DEVELOPMENT = true;`
3. 重新编译小程序
4. 查看控制台: 显示"🚀 小程序环境: 开发环境"

### 生产发布
1. 修改配置: `const IS_DEVELOPMENT = false;`
2. 重新编译小程序
3. 打包发布到微信平台
4. 用户使用时会自动连接生产服务器

## 🔑 Token说明

### 开发环境
- 自动使用内置测试Token
- 无需用户登录即可测试功能
- Token: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`

### 生产环境
- 使用用户真实的登录Token
- 需要用户先登录获取Token
- 存储在 `wx.getStorageSync('token')`

## 📝 注意事项

1. **开发时**: 保持 `IS_DEVELOPMENT = true`，方便测试
2. **发布前**: 务必改为 `IS_DEVELOPMENT = false`
3. **服务器**: 确保对应环境的服务器正在运行
4. **网络**: 开发环境需要本地网络连接正常

## 🎯 测试验证

### 开发环境测试
```javascript
// 控制台输出
🚀 小程序环境: 开发环境
📡 API地址: http://localhost:5000

// API请求
POST http://localhost:5000/xiaohongshu/api/client/tasks/batch-submit
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 生产环境测试
```javascript
// 控制台无调试输出
// API请求
POST https://www.wubug.cc/xiaohongshu/api/client/tasks/batch-submit
Authorization: Bearer [用户真实Token]
```

现在你可以轻松在开发和生产环境之间切换了！🎉