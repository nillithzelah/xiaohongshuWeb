# 积分与财务系统业务规则

## 📊 系统概述

### 🎯 核心概念
- **积分 (Points)**: 虚拟奖励货币，用于激励用户参与
- **余额 (Balance)**: 真实人民币，可直接提现到支付宝
- **交易记录**: 所有金额变动的详细记录

### 🔄 转换关系
```
积分获取 → 积分累积 → 积分兑换 → 余额增加 → 余额提现
     ↓           ↓         ↓         ↓         ↓
审核奖励   持续检查   管理员操作   增加余额   支付宝转账
```

## 💰 积分系统

### 📈 积分获得规则
1. **审核任务奖励**
    - 审核完成奖励: 任务金额等于积分数量
    - 例如: 审核获得10元 → 奖励10积分

2. **持续检查奖励**
   - 笔记存在性检查: 0.3积分/天
   - 每日检查通过奖励积分
   - 上级佣金: 按审核时比例发放

3. **其他奖励**
   - 推荐新用户: 5积分
   - 完成培训任务: 2-10积分

### 🔄 积分兑换规则
- **兑换比例**: 1积分 = 1元人民币
- **兑换权限**: 老板、主管、带教老师可操作
- **最小兑换**: 1积分起兑
- **余额上限**: 单次兑换不超过999999.99元

## 💵 财务系统

### 📈 余额获得来源
1. **任务奖励直接发放**
   - 审核任务完成后直接到账
   - 无需兑换过程

2. **积分兑换**
   - 用户积分兑换成余额
   - 实时到账

3. **推荐奖励**
   - 推荐新用户注册: 5元
   - 下级用户消费提成: 5-10%

### 💸 提现规则
- **最低提现**: 10元
- **提现手续费**: 0% (平台承担)
- **到账时间**: 1-3个工作日
- **提现方式**: 支付宝转账

### 📊 金额计算逻辑
```
当前余额 = 总获得金额 - 已提现金额
总获得金额 = 任务奖励 + 积分兑换 + 推荐奖励
```

## 🔐 权限控制

### 👥 用户角色权限
- **兼职用户**: 查看个人积分和余额
- **带教老师**: 查看名下用户财务，操作积分兑换
- **主管/老板**: 查看所有用户财务，操作所有兑换
- **财务**: 处理提现申请，打款操作

### 🛡️ 数据安全
- 所有金额变动记录交易日志
- 敏感操作需要二次确认
- 异常金额变动自动报警

## 📋 操作流程

### 💱 积分兑换流程
1. 管理员检查用户积分余额
2. 输入兑换积分数量
3. 系统验证积分充足性
4. 扣除用户积分，增加余额
5. 创建兑换交易记录
6. 通知用户兑换成功

### 💰 提现流程
1. 用户提交提现申请
2. 财务审核申请
3. 执行支付宝转账
4. 更新用户余额和提现记录
5. 通知用户到账

## 📊 数据一致性保证

### 🔍 数据验证规则
- 余额不能为负数
- 积分不能为负数
- 总获得 = 当前余额 + 已提现
- 交易记录必须完整

### 🔄 数据修复机制
- 定期检查数据一致性
- 自动修复小额误差
- 大额异常人工干预

## 🎯 业务目标

### 📈 用户激励
- 通过积分系统提高用户活跃度
- 通过财务奖励确保用户收益

### 💼 平台收益
- 控制提现节奏，保持用户粘性
- 通过推荐机制扩大用户规模

### 🛡️ 风险控制
- 防止恶意刷积分
- 控制大额提现风险
- 确保财务数据准确性

---

**最后更新**: 2025-12-22
**版本**: v2.0