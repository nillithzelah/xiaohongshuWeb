<!-- pages/device-list/device-list.wxml -->
<view class="container">

  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-content">
      <text class="page-title">æˆ‘çš„è®¾å¤‡ç®¡ç†</text>
      <text class="page-subtitle">æŸ¥çœ‹æ‚¨è¢«åˆ†é…çš„è®¾å¤‡çŠ¶æ€</text>
    </view>
  </view>

  <!-- éª¨æ¶å±åŠ è½½çŠ¶æ€ -->
  <view class="skeleton-container" wx:if="{{loading}}">
    <view wx:for="{{[1,2,3]}}" wx:key="*this" class="skeleton-card">
      <view class="skeleton-header">
        <view class="skeleton-avatar skeleton-shimmer"></view>
        <view class="skeleton-info">
          <view class="skeleton-text skeleton-shimmer"></view>
          <view class="skeleton-text skeleton-shimmer" style="width: 60%;"></view>
        </view>
        <view class="skeleton-status skeleton-shimmer"></view>
      </view>
      <view class="skeleton-stats">
        <view class="skeleton-stat-item">
          <view class="skeleton-text skeleton-shimmer" style="width: 80%;"></view>
          <view class="skeleton-text skeleton-shimmer" style="width: 60%;"></view>
        </view>
        <view class="skeleton-stat-item">
          <view class="skeleton-text skeleton-shimmer" style="width: 70%;"></view>
          <view class="skeleton-text skeleton-shimmer" style="width: 50%;"></view>
        </view>
      </view>
    </view>
  </view>

  <!-- çœŸå®è®¾å¤‡åˆ—è¡¨ -->
  <view wx:else>
    <view class="device-list" wx:if="{{devices.length > 0}}">
      <view
        wx:for="{{devices}}"
        wx:key="_id"
        class="device-card"
      >
        <view class="device-header">
          <view class="device-info">
            <text class="device-name">{{item.accountName}}</text>
            <text class="device-influence">å½±å“åŠ›: {{item.influence}}</text>
          </view>
          <view class="device-status">
            <text
              class="status-badge"
              wx:if="{{item.status === 'online'}}"
              style="background: #f6ffed; color: #52c41a; border-color: #b7eb8f;"
            >
              â— åœ¨çº¿
            </text>
            <text
              class="status-badge"
              wx:elif="{{item.status === 'offline'}}"
              style="background: #fff7e6; color: #fa8c16; border-color: #ffd591;"
            >
              â— ç¦»çº¿
            </text>
            <text
              class="status-badge"
              wx:elif="{{item.status === 'protected'}}"
              style="background: #e6f7ff; color: #1890ff; border-color: #91d5ff;"
            >
              â— ä¿æŠ¤
            </text>
            <text
              class="status-badge"
              wx:elif="{{item.status === 'frozen'}}"
              style="background: #fff2f0; color: #ff4d4f; border-color: #ffccc7;"
            >
              â— å†»ç»“
            </text>
          </view>
        </view>

        <view class="device-stats">
          <view class="stat-item">
            <text class="stat-label">åœ¨çº¿æ—¶é•¿</text>
            <text class="stat-value">{{item.onlineDuration}} å°æ—¶</text>
          </view>
          <view class="stat-item">
            <text class="stat-label">ç§¯åˆ†</text>
            <text class="stat-value" style="color: #ff4d4f; font-weight: bold;">{{item.points}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:else class="empty-state">
      <view class="empty-icon">ğŸ“±</view>
      <text class="empty-title">æš‚æ— è®¾å¤‡</text>
      <text class="empty-subtitle">è¯·è”ç³»ç®¡ç†å‘˜ä¸ºæ‚¨åˆ†é…è®¾å¤‡</text>
    </view>
  </view>

</view>